---
import styles from './style.module.scss';

interface Props {
  title: string;
  url: string;
  desc: string;
}

const { title, url, desc } = Astro.props;

// Helper: Better Google Favicon URL with higher resolution
const getFavicon = (url: string) => {
  if (url.startsWith('/')) return '/favicon.svg'; 
  try {
    const domain = new URL(url).hostname;
    return `https://www.google.com/s2/favicons?domain=${domain}&sz=128`;
  } catch (e) {
    return '/favicon.svg';
  }
};

const iconUrl = getFavicon(url);
---

<a href={url} class={styles.card} target={url.startsWith('http') ? "_blank" : "_self"}>
  <div class={styles.header}>
    <div class={styles.icon}>
      <img src={iconUrl} alt={title} loading="lazy" />
    </div>
  </div>
  <div class={styles.content}>
    <div class={styles.title}>{title}</div>
    <div class={styles.desc}>{desc}</div>
  </div>
</a>